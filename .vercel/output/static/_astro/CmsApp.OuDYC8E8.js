import{j as e,C as J,u as P,D as O}from"./ContentContext.DwKpW2sj.js";import{r as n}from"./index.Cd_vQiNd.js";const R="Editor",$="WebInvestigación202025",j="webinvestigacion_admin_session",z={updateValueSection:(i,f,p,b)=>i.map((d,c)=>c===f?{...d,[p]:b}:d)},U=()=>{const{content:i,setContent:f,isLoading:p}=P(),[b,d]=n.useState(!1),[c,N]=n.useState({username:"",password:""}),[v,w]=n.useState(""),[r,l]=n.useState(i),[S,m]=n.useState(""),[C,x]=n.useState(""),[g,k]=n.useState(!1);n.useEffect(()=>{l(i)},[i]),n.useEffect(()=>{if(typeof window>"u")return;window.sessionStorage.getItem(j)==="true"&&d(!0)},[]);const E=s=>{const{name:o,value:a}=s.target;N(t=>({...t,[o]:a}))},D=s=>{s.preventDefault(),c.username===R&&c.password===$?(d(!0),w(""),m(""),x(""),typeof window<"u"&&window.sessionStorage.setItem(j,"true")):w("Credenciales incorrectas. Intenta nuevamente.")},L=()=>{d(!1),N({username:"",password:""}),m(""),x(""),typeof window<"u"&&window.sessionStorage.removeItem(j)},y=s=>{const{name:o,value:a}=s.target;l(t=>({...t,hero:{...t.hero,[o]:a}}))},q=(s,o,a)=>{l(t=>({...t,sections:z.updateValueSection(t.sections&&t.sections.length?t.sections:O.sections,s,o,a)}))},h=s=>{const{name:o,value:a}=s.target;l(t=>({...t,contact:{...t.contact,[o]:a}}))},F=async(s,o)=>{let a=!1;try{k(!0),m(""),x("");const t=JSON.parse(JSON.stringify(s)),I=await fetch("/api/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});let u=null;try{u=await I.json()}catch{}if(!I.ok||!u){const T=u&&u.error||"No se pudieron guardar los cambios. Intenta nuevamente.";throw new Error(T)}f(u),l(u),m(o??"Cambios guardados correctamente."),a=!0}catch(t){console.error("Error al guardar el contenido.",t),x(t.message||"No se pudieron guardar los cambios. Intenta nuevamente.")}finally{k(!1)}return a},A=async()=>{const s=JSON.parse(JSON.stringify(O));l(s),await F(s,"Se restauró el contenido predeterminado.")||l(i)},_=async s=>{s.preventDefault(),await F(r,"Cambios guardados correctamente.")};return b?e.jsxs("div",{className:"mx-auto flex w-full max-w-5xl flex-1 flex-col gap-10 px-4 py-16",children:[e.jsxs("header",{className:"flex flex-col gap-2 text-white md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Editor de contenido"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Actualiza los textos visibles en la landing page. Los cambios se guardan en el proyecto para el próximo despliegue."}),p&&e.jsx("p",{className:"text-xs text-slate-400",children:"Cargando contenido guardado…"})]}),e.jsx("button",{type:"button",onClick:L,className:"inline-flex items-center justify-center rounded-md border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 transition hover:border-slate-500 hover:text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-300",children:"Cerrar sesión"})]}),e.jsxs("form",{onSubmit:_,className:"flex flex-col gap-12",children:[e.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-6 text-white shadow-lg shadow-slate-950/40",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Hero"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Controla el mensaje principal y el texto del botón."}),e.jsxs("div",{className:"mt-6 grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"hero-title",className:"text-sm font-medium text-slate-200",children:"Título"}),e.jsx("input",{id:"hero-title",name:"title",type:"text",required:!0,value:r.hero.title,onChange:y,className:"rounded-md border border-slate-700 bg-slate-950/60 px-4 py-2 text-white focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/40",placeholder:"Título principal"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"hero-subtitle",className:"text-sm font-medium text-slate-200",children:"Subtítulo"}),e.jsx("textarea",{id:"hero-subtitle",name:"subtitle",rows:"3",required:!0,value:r.hero.subtitle,onChange:y,className:"rounded-md border border-slate-700 bg-slate-950/60 px-4 py-2 text-white focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/40",placeholder:"Subtítulo descriptivo"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"hero-cta",className:"text-sm font-medium text-slate-200",children:"Texto del botón"}),e.jsx("input",{id:"hero-cta",name:"ctaLabel",type:"text",required:!0,value:r.hero.ctaLabel,onChange:y,className:"rounded-md border border-slate-700 bg-slate-950/60 px-4 py-2 text-white focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/40",placeholder:"Llamado a la acción"})]})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-6 text-white shadow-lg shadow-slate-950/40",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Secciones intermedias"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Edita los bloques que explican tu propuesta de valor."}),e.jsx("div",{className:"mt-6 grid gap-8 md:grid-cols-2",children:r.sections.map((s,o)=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-200",htmlFor:`${s.id}-title`,children:"Título"}),e.jsx("input",{id:`${s.id}-title`,type:"text",required:!0,value:s.title,onChange:a=>q(o,"title",a.target.value),className:"rounded-md border border-slate-700 bg-slate-950/60 px-4 py-2 text-white focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/40"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-200",htmlFor:`${s.id}-description`,children:"Descripción"}),e.jsx("textarea",{id:`${s.id}-description`,rows:"4",required:!0,value:s.description,onChange:a=>q(o,"description",a.target.value),className:"rounded-md border border-slate-700 bg-slate-950/60 px-4 py-2 text-white focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/40"})]})]},s.id))})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-6 text-white shadow-lg shadow-slate-950/40",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Información de contacto"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Personaliza los datos que acompañan al formulario."}),e.jsxs("div",{className:"mt-6 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[e.jsx("label",{htmlFor:"contact-heading",className:"text-sm font-medium text-slate-200",children:"Encabezado"}),e.jsx("input",{id:"contact-heading",name:"heading",type:"text",required:!0,value:r.contact.heading,onChange:h,className:"rounded-md border border-slate-700 bg-slate-950/60 px-4 py-2 text-white focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/40"})]}),e.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[e.jsx("label",{htmlFor:"contact-description",className:"text-sm font-medium text-slate-200",children:"Descripción"}),e.jsx("textarea",{id:"contact-description",name:"description",rows:"4",required:!0,value:r.contact.description,onChange:h,className:"rounded-md border border-slate-700 bg-slate-950/60 px-4 py-2 text-white focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/40"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"contact-email",className:"text-sm font-medium text-slate-200",children:"Email"}),e.jsx("input",{id:"contact-email",name:"email",type:"email",required:!0,value:r.contact.email,onChange:h,className:"rounded-md border border-slate-700 bg-slate-950/60 px-4 py-2 text-white focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/40"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"contact-phone",className:"text-sm font-medium text-slate-200",children:"Teléfono"}),e.jsx("input",{id:"contact-phone",name:"phone",type:"text",required:!0,value:r.contact.phone,onChange:h,className:"rounded-md border border-slate-700 bg-slate-950/60 px-4 py-2 text-white focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/40"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("button",{type:"button",onClick:A,disabled:g,className:"inline-flex items-center justify-center rounded-md border border-red-500/60 px-4 py-2 text-sm font-semibold text-red-300 transition hover:border-red-400 hover:text-red-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-400 disabled:cursor-not-allowed disabled:opacity-60",children:"Restaurar contenido predeterminado"}),e.jsx("button",{type:"submit",disabled:g,className:"inline-flex items-center justify-center rounded-md bg-emerald-500 px-6 py-2 text-sm font-semibold text-white transition hover:bg-emerald-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-300 disabled:cursor-not-allowed disabled:opacity-60",children:g?"Guardando…":"Guardar cambios"})]}),C&&e.jsx("p",{className:"text-sm text-red-400",children:C}),S&&e.jsx("p",{className:"text-sm text-emerald-400",children:S})]})]}):e.jsx("div",{className:"mx-auto flex w-full max-w-4xl flex-1 items-center justify-center px-4 py-16",children:e.jsxs("section",{className:"mx-auto flex w-full max-w-md flex-col gap-6 rounded-2xl border border-slate-800 bg-slate-900/80 px-6 py-8 text-white shadow-lg shadow-slate-950/40",children:[e.jsxs("header",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Panel de administración"}),e.jsx("p",{className:"text-sm text-slate-300",children:"Ingresa con las credenciales entregadas para editar el contenido público de la landing page."})]}),e.jsxs("form",{onSubmit:D,className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"username",className:"text-sm font-medium text-slate-200",children:"Usuario"}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:c.username,onChange:E,className:"rounded-md border border-slate-700 bg-slate-950/60 px-4 py-2 text-white focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/40",placeholder:"Editor"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-slate-200",children:"Contraseña"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:c.password,onChange:E,className:"rounded-md border border-slate-700 bg-slate-950/60 px-4 py-2 text-white focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/40",placeholder:"********"})]}),e.jsx("button",{type:"submit",className:"mt-2 inline-flex items-center justify-center rounded-md bg-sky-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-sky-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-300",children:"Iniciar sesión"}),v&&e.jsx("p",{className:"text-sm text-red-400",children:v})]})]})})},M=()=>e.jsx(J,{children:e.jsx("div",{className:"flex min-h-[calc(100vh-8rem)] flex-col",children:e.jsx(U,{})})});export{M as default};
